# 수정 요구사항: 설정 및 프로필 UI/기능 개선

## 사용자 요청 요약
1. 설정 화면에서 프로필 표시이름 변경 시 수정 버튼 추가 (변경 시만 활성화)
2. 더보기의 프로필 섹션에서 아이디(이메일) 표시, 색상 아이콘, > 버튼 제거
3. 결제수단 생성 시 랜덤 색상 지정 (이미 구현됨 - 추가 작업 불필요)
4. 색상 선택 레이아웃: 12개 색상, 2줄, 크기 축소, 여백 균등
5. 비밀번호 변경: 현재 비밀번호 입력 후 새 비밀번호로 변경

---

## 상세 요구사항

### 1. 설정 화면 - 표시이름 변경

**현재 동작:**
- TextFormField에서 엔터 키로 저장

**개선 사항:**
- [ ] TextFormField 옆에 '수정' 버튼 추가
- [ ] 값이 변경되지 않은 경우 버튼 비활성화
- [ ] 값이 변경된 경우 버튼 활성화
- [ ] 버튼 클릭 시 저장 수행

---

### 2. 더보기 - 프로필 섹션 변경

**현재 동작:**
- leading: CircleAvatar에 이메일 첫글자
- title: 이메일
- subtitle: "프로필 수정"
- trailing: chevron_right 아이콘
- onTap: 프로필 페이지 이동 (미구현)

**개선 사항:**
- [ ] leading: CircleAvatar 배경색을 사용자 설정 색상으로 변경
- [ ] title: 이메일(아이디) 그대로 표시
- [ ] subtitle: 사용자 표시이름 표시 (없으면 생략)
- [ ] trailing: chevron_right 아이콘 제거
- [ ] onTap: 제거 또는 아무 동작 안함

---

### 3. 색상 선택 레이아웃 수정

**현재 동작:**
- 10개 색상
- Wrap으로 자유 배치
- 원형 50x50 크기
- 왼쪽 여백 좁음, 오른쪽 여백 넓음

**개선 사항:**
- [ ] 색상 12개로 확장 (2개 추가: 연노랑, 연하늘 등 파스텔톤)
- [ ] 원형 크기 축소 (36~40 정도)
- [ ] 6개씩 2줄로 고정 배치 (GridView 또는 Row 2개)
- [ ] 좌우 여백 균등하게 맞춤

---

### 4. 비밀번호 변경 방식 변경

**현재 동작:**
- 이메일로 비밀번호 재설정 링크 발송

**개선 사항:**
- [ ] AuthService에 `verifyAndUpdatePassword` 메서드 추가
  - 현재 비밀번호로 재인증 (signInWithPassword)
  - 성공 시 updateUser로 새 비밀번호 설정
- [ ] 다이얼로그 UI 변경
  - 현재 비밀번호 입력 필드 (obscureText: true)
  - 새 비밀번호 입력 필드
  - 새 비밀번호 확인 입력 필드
  - 변경 버튼
- [ ] 유효성 검사
  - 새 비밀번호와 확인이 일치하는지 확인
  - 최소 6자 이상 (Supabase 기본)
  - 현재 비밀번호 틀리면 에러 메시지

---

## 수정 대상 파일

| 파일 | 변경 내용 |
|------|----------|
| `settings_page.dart` | 표시이름 수정 버튼, 비밀번호 변경 다이얼로그 |
| `home_page.dart` | MoreTabView 프로필 섹션 수정 |
| `color_picker.dart` | 색상 추가, 레이아웃 변경 |
| `auth_provider.dart` | verifyAndUpdatePassword 메서드 추가 |

---

## 엣지 케이스

### 표시이름 변경
- 빈 문자열 허용 여부 (허용)
- 네트워크 오류 시 에러 메시지

### 비밀번호 변경
- 현재 비밀번호 틀린 경우: "현재 비밀번호가 올바르지 않습니다"
- 새 비밀번호 불일치: "새 비밀번호가 일치하지 않습니다"
- 비밀번호 6자 미만: "비밀번호는 6자 이상이어야 합니다"

### 프로필 섹션
- 사용자 색상 없는 경우 기본 색상 사용 (#A8D8EA)
- 표시이름 없는 경우 subtitle 생략
