# PRD: 자산(Asset) 관리 기능

## 목적
수입/지출/저축에 포함되지 않는 자산(예금, 적금, 투자 등)을 관리하고 시각화하는 기능을 구현하여, 예산 탭을 자산 탭으로 교체합니다.

## 배경
- 현재 앱에는 수입(income), 지출(expense), 저축(saving) 타입의 거래만 존재
- 예금, 적금, 투자 등 장기 자산을 관리할 수 있는 기능 부재
- 예산(Budget) 기능은 사용 빈도가 낮아 자산 기능으로 교체 필요

## 필수 요구사항

### 1. 데이터 모델
- [ ] 자산을 transactions 테이블 확장으로 관리 (is_asset 컬럼 추가)
- [ ] 자산 카테고리: 사용자가 직접 생성 (예금, 적금, 투자, 부동산, 차량 등)
- [ ] 만기일(maturity_date) 지원
- [ ] 반복 주기와 만기일 연동 (만기 체크 시 종료일 자동 설정)

### 2. 거래 추가 시 저축 → 자산 전환
- [ ] 저축 타입 선택 시 만기 체크박스 추가
- [ ] 만기일 입력 시 반복 주기의 종료일 자동 설정
- [ ] 자산 카테고리 선택 (기본값 없음, 사용자 생성)

### 3. 자산 탭 UI 구성
- [ ] **헤더**: 총 자산 금액 + 이번 달 변동 금액
- [ ] **Line 차트**: 월별 자산 변화 추이 (최근 6개월)
- [ ] **Donut 차트**: 카테고리별 자산 비율
- [ ] **리스트**: 카테고리별 자산 항목 (예금/적금/투자별 항목)

### 4. 자산 계산 로직
- [ ] 자산 = 저축 타입 거래의 누적 합계
- [ ] 월별 변동: 해당 월의 저축 거래 합계
- [ ] 카테고리별 집계: 마지막 거래일 기준 누적 합계

## 기술 스펙

### 데이터베이스 설계 (transactions 테이블 확장)
```sql
-- transactions 테이블에 컬럼 추가
ALTER TABLE transactions
ADD COLUMN is_asset BOOLEAN DEFAULT FALSE,
ADD COLUMN maturity_date DATE;

-- 자산 카테고리는 기존 categories 테이블 활용 (type = 'saving')
```

**선택 이유**:
- 기존 구조 유지, 마이그레이션 간단
- 저축 → 자산 전환이 자연스러움
- 반복 거래(recurring_templates) 로직 재사용 가능

## 화면 설계

### 자산 탭 레이아웃
```
┌─────────────────────────────────────┐
│  총 자산: 15,000,000원               │
│  이번 달 변동: +500,000원             │
├─────────────────────────────────────┤
│  📈 Line Chart (월별 자산 변화)       │
│  (6개월 추이)                        │
├─────────────────────────────────────┤
│  🍩 Donut Chart (카테고리별 비율)     │
│  - 예금 40%                          │
│  - 적금 30%                          │
│  - 투자 30%                          │
├─────────────────────────────────────┤
│  📋 카테고리별 리스트                │
│  예금                                │
│    - 신한 정기예금 (5,000,000원)     │
│  적금                                │
│    - KB 적금 (3,000,000원)           │
│  투자                                │
│    - 주식 (7,000,000원)              │
└─────────────────────────────────────┘
```

## 성공 기준
- [ ] 예산 탭이 자산 탭으로 교체됨
- [ ] 자산 카테고리를 사용자가 자유롭게 생성/삭제 가능
- [ ] 만기일 설정 시 반복 주기가 자동으로 종료됨
- [ ] Line 차트로 월별 자산 변화 확인 가능
- [ ] Donut 차트로 카테고리별 비율 확인 가능
- [ ] 카테고리별 자산 항목 리스트 표시

## 제외 사항
- 예산(Budget) 기능 완전 삭제 (데이터 마이그레이션 불필요, 기존 사용자 없음)
- 자산 직접 수정 기능 (초기 버전에서는 거래 기록으로만 관리)
- 투자 수익률 계산 (추후 확장 기능)

## 기술 스택
- **Backend**: Supabase PostgreSQL
- **State Management**: Riverpod
- **Chart Library**: fl_chart (LineChart 위젯 신규 사용)
- **Architecture**: Clean Architecture + Feature-first

## 일정
- Phase 1 (DB 설계): 0.5일
- Phase 2 (Domain/Data): 1일
- Phase 3 (Presentation): 2일
- Phase 4 (통합/테스트): 0.5일
- **총 4일 예상**
