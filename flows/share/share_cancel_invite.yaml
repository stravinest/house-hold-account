appId: com.household.shared.shared_household_account
---
# 테스트: 초대 취소
# 보낸 초대 목록에서 대기 중인 초대를 취소한다

# 앱 상태 초기화 및 시작
- clearState
- launchApp
- waitForAnimationToEnd

# 로그인 수행
- assertVisible: '공유 가계부'
- tapOn: '이메일'
- inputText: ${TEST_EMAIL}
- tapOn: '비밀번호'
- inputText: ${TEST_PASSWORD}
- pressKey: back
- tapOn:
    text: '로그인'
    index: 0

# 홈 화면 로딩 대기
- extendedWaitUntil:
    visible: '내 가계부'
    timeout: 20000

# 더보기 탭으로 이동 (하단 네비게이션 좌표 사용)
- tapOn:
    point: '88%,95%'
- waitForAnimationToEnd

# 공유 관리 메뉴 탭
- tapOn: '공유 관리'
- waitForAnimationToEnd

# 공유 관리 화면 확인
- assertVisible: '공유 관리'

# 보낸 초대 탭으로 이동
- tapOn: '보낸 초대'
- waitForAnimationToEnd

# 보낸 초대 목록 확인
- runFlow:
    when:
      visible: '대기 중'
    commands:
      # 대기 중인 초대가 있으면 취소 아이콘 탭
      - tapOn:
          id: '.*cancel.*'
          optional: true
      # 또는 cancel 아이콘을 찾아서 탭
      - runFlow:
          when:
            notVisible: '초대 취소'
          commands:
            # 첫 번째 ListTile의 취소 버튼 시도
            - tapOn:
                point: '90%,30%'

# 확인 다이얼로그 대기
- extendedWaitUntil:
    visible: '초대 취소'
    timeout: 3000

# 확인 다이얼로그에서 '예' 버튼 탭
- assertVisible: '아니오'
- assertVisible: '예'
- tapOn: '예'
- waitForAnimationToEnd

# 성공 메시지 확인
- assertVisible: '초대가 취소되었습니다'

# 성공 스크린샷
- takeScreenshot: share_invite_cancelled

# 보낸 초대 탭으로 돌아왔는지 확인
- assertVisible: '보낸 초대'
