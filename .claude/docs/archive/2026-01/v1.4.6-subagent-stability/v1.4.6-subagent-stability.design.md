# v1.4.6 Sub Agent í˜¸ì¶œ ì•ˆì •í™” ì„¤ê³„ì„œ

> **Summary**: Plugin agent í˜¸ì¶œ ì‹œ `bkit:` prefix ì¶”ê°€ë¥¼ ìœ„í•œ ìƒì„¸ ì„¤ê³„
>
> **Project**: bkit Vibecoding Kit
> **Version**: 1.4.5 â†’ 1.4.6
> **Author**: Claude Code + bkit PDCA
> **Date**: 2026-01-28
> **Status**: Draft
> **Planning Doc**: [v1.4.6-subagent-stability.plan.md](../01-plan/features/v1.4.6-subagent-stability.plan.md)

---

## 1. Overview

### 1.1 Design Goals

1. ëª¨ë“  bkit plugin agent í˜¸ì¶œ ì‹œ `bkit:` prefixê°€ í¬í•¨ë˜ë„ë¡ ë³´ì¥
2. Built-in agent (claude-code-guide)ëŠ” prefix ì—†ì´ ìœ ì§€
3. ì½”ë“œ ë³€ê²½ì˜ ì¼ê´€ì„± í™•ë³´
4. í–¥í›„ ìœ ì§€ë³´ìˆ˜ì„±ì„ ìœ„í•œ ëª…í™•í•œ ëª…ëª… ê·œì¹™ ì •ë¦½

### 1.2 Design Principles

- **Explicit over Implicit**: agent ì´ë¦„ì— plugin prefixë¥¼ ëª…ì‹œì ìœ¼ë¡œ í¬í•¨
- **Backward Compatibility**: ê¸°ì¡´ ê¸°ëŠ¥ íšŒê·€ ì—†ì´ ìˆ˜ì •
- **Single Source of Truth**: `lib/common.js`ì—ì„œ agent ì´ë¦„ ì¤‘ì•™ ê´€ë¦¬

---

## 2. Architecture

### 2.1 Agent í˜¸ì¶œ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent í˜¸ì¶œ íë¦„ (ìˆ˜ì • í›„)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   [User Input]                                                  â”‚
â”‚       â”‚ "ì„¤ê³„ëŒ€ë¡œ êµ¬í˜„ëì–´?"                                      â”‚
â”‚       â–¼                                                         â”‚
â”‚   [UserPromptSubmit Hook]                                       â”‚
â”‚       â”‚ matchImplicitAgentTrigger(userPrompt)                   â”‚
â”‚       â”‚ returns: { agent: "bkit:gap-detector", ... }  â† ìˆ˜ì •ë¨   â”‚
â”‚       â–¼                                                         â”‚
â”‚   [session-start.js additionalContext]                          â”‚
â”‚       â”‚ "Suggested agent: bkit:gap-detector"                    â”‚
â”‚       â–¼                                                         â”‚
â”‚   [Claude AI]                                                   â”‚
â”‚       â”‚ Task(subagent_type="bkit:gap-detector", prompt="...")   â”‚
â”‚       â–¼                                                         â”‚
â”‚   [Claude Code Task Tool]                                       â”‚
â”‚       â”‚ Looks up "bkit:gap-detector" in available agents        â”‚
â”‚       â”‚ Found: "bkit:gap-detector" âœ…                           â”‚
â”‚       â–¼                                                         â”‚
â”‚   [Agent Execution - SUCCESS]                                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Skill â†’ Agent í˜¸ì¶œ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Skill-Agent Integration (ìˆ˜ì • í›„)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   [User Command]                                                â”‚
â”‚       â”‚ "/pdca analyze my-feature"                              â”‚
â”‚       â–¼                                                         â”‚
â”‚   [PDCA Skill Frontmatter]                                      â”‚
â”‚       â”‚ agents:                                                 â”‚
â”‚       â”‚   analyze: bkit:gap-detector  â† ìˆ˜ì •ë¨                   â”‚
â”‚       â–¼                                                         â”‚
â”‚   [Skill Execution]                                             â”‚
â”‚       â”‚ Task(subagent_type="bkit:gap-detector", ...)            â”‚
â”‚       â–¼                                                         â”‚
â”‚   [Agent Execution - SUCCESS]                                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ì˜í–¥ë°›ëŠ” ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ìˆ˜ì • ëŒ€ìƒ ì»´í¬ë„ŒíŠ¸                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   lib/common.js                                                 â”‚
â”‚       â””â”€â”€ matchImplicitAgentTrigger()  [Critical]               â”‚
â”‚                                                                 â”‚
â”‚   hooks/session-start.js                                        â”‚
â”‚       â””â”€â”€ getTriggerKeywordTable()     [Medium]                 â”‚
â”‚                                                                 â”‚
â”‚   skills/                                                       â”‚
â”‚       â”œâ”€â”€ pdca/SKILL.md               [Critical]                â”‚
â”‚       â”œâ”€â”€ phase-8-review/SKILL.md     [High]                    â”‚
â”‚       â”œâ”€â”€ enterprise/SKILL.md         [High]                    â”‚
â”‚       â”œâ”€â”€ code-review/SKILL.md        [High]                    â”‚
â”‚       â”œâ”€â”€ starter/SKILL.md            [High]                    â”‚
â”‚       â”œâ”€â”€ dynamic/SKILL.md            [High]                    â”‚
â”‚       â”œâ”€â”€ (+ 12 more skills)          [High]                    â”‚
â”‚       â””â”€â”€ bkit-rules/SKILL.md         [Medium - Documentation]  â”‚
â”‚                                                                 â”‚
â”‚   .claude-plugin/plugin.json                                    â”‚
â”‚       â””â”€â”€ version: "1.4.6"            [High]                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Data Model

### 3.1 Agent ë¶„ë¥˜ ì •ì˜

```typescript
// Agent ìœ í˜• ì •ì˜
type AgentType = 'built-in' | 'plugin';

interface AgentDefinition {
  name: string;           // ì›ë³¸ ì´ë¦„ (e.g., "gap-detector")
  fullName: string;       // Task tool í˜¸ì¶œìš© ì „ì²´ ì´ë¦„
  type: AgentType;
  description: string;
}

// Built-in Agents (prefix ë¶ˆí•„ìš”)
const BUILTIN_AGENTS: AgentDefinition[] = [
  { name: 'Explore', fullName: 'Explore', type: 'built-in', description: 'ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰' },
  { name: 'Plan', fullName: 'Plan', type: 'built-in', description: 'êµ¬í˜„ ê³„íš ì„¤ê³„' },
  { name: 'general-purpose', fullName: 'general-purpose', type: 'built-in', description: 'ë²”ìš© ì—ì´ì „íŠ¸' },
  { name: 'Bash', fullName: 'Bash', type: 'built-in', description: 'ëª…ë ¹ì–´ ì‹¤í–‰' },
  { name: 'claude-code-guide', fullName: 'claude-code-guide', type: 'built-in', description: 'Claude Code ê°€ì´ë“œ' },
];

// bkit Plugin Agents (prefix í•„ìˆ˜)
const BKIT_AGENTS: AgentDefinition[] = [
  { name: 'gap-detector', fullName: 'bkit:gap-detector', type: 'plugin', description: 'ì„¤ê³„-êµ¬í˜„ Gap ë¶„ì„' },
  { name: 'code-analyzer', fullName: 'bkit:code-analyzer', type: 'plugin', description: 'ì½”ë“œ í’ˆì§ˆ ë¶„ì„' },
  { name: 'pdca-iterator', fullName: 'bkit:pdca-iterator', type: 'plugin', description: 'ìë™ ê°œì„  ë°˜ë³µ' },
  { name: 'report-generator', fullName: 'bkit:report-generator', type: 'plugin', description: 'ì™„ë£Œ ë³´ê³ ì„œ ìƒì„±' },
  { name: 'starter-guide', fullName: 'bkit:starter-guide', type: 'plugin', description: 'ì´ˆë³´ì ê°€ì´ë“œ' },
  { name: 'design-validator', fullName: 'bkit:design-validator', type: 'plugin', description: 'ì„¤ê³„ ë¬¸ì„œ ê²€ì¦' },
  { name: 'qa-monitor', fullName: 'bkit:qa-monitor', type: 'plugin', description: 'ì‹¤ì‹œê°„ QA ëª¨ë‹ˆí„°ë§' },
  { name: 'pipeline-guide', fullName: 'bkit:pipeline-guide', type: 'plugin', description: '9ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ ê°€ì´ë“œ' },
  { name: 'bkend-expert', fullName: 'bkit:bkend-expert', type: 'plugin', description: 'bkend.ai BaaS ì „ë¬¸ê°€' },
  { name: 'enterprise-expert', fullName: 'bkit:enterprise-expert', type: 'plugin', description: 'Enterprise ì•„í‚¤í…ì²˜ ì „ë¬¸ê°€' },
  { name: 'infra-architect', fullName: 'bkit:infra-architect', type: 'plugin', description: 'AWS/K8s ì¸í”„ë¼ ì„¤ê³„' },
];
```

---

## 4. Detailed Implementation Specification

### 4.1 lib/common.js ìˆ˜ì •

**íŒŒì¼**: `lib/common.js`
**í•¨ìˆ˜**: `matchImplicitAgentTrigger` (line 1980-2060)
**ë³€ê²½ ìœ í˜•**: Key ê°’ ìˆ˜ì •

#### Before (í˜„ì¬ ì½”ë“œ):
```javascript
const implicitPatterns = {
  'gap-detector': {
    patterns: [
      /is this (right|correct)/i, /does this match/i, /verify/i, /check/i,
      /ë§ì•„\??/, /ê´œì°®ì•„\??/, /ì„¤ê³„ëŒ€ë¡œ/, /ê²€ì¦/, /í™•ì¸/,
      // ... (ìƒëµ)
    ],
    contextRequired: ['design', 'implementation']
  },
  'code-analyzer': {
    patterns: [
      /any (issues|problems)/i, /something (wrong|off)/i, /analyze/i, /quality/i,
      // ... (ìƒëµ)
    ],
    contextRequired: ['code']
  },
  'pdca-iterator': {
    patterns: [
      /make.*better/i, /improve/i, /fix (this|it)/i, /iterate/i, /auto.?fix/i,
      // ... (ìƒëµ)
    ],
    contextRequired: ['check', 'act']
  },
  'report-generator': {
    patterns: [
      /what did we/i, /status/i, /progress/i, /summary/i, /report/i,
      // ... (ìƒëµ)
    ],
    contextRequired: ['any']
  },
  'starter-guide': {
    patterns: [
      /help.*understand/i, /don't understand/i, /confused/i, /beginner/i,
      // ... (ìƒëµ)
    ],
    contextRequired: ['any']
  }
};
```

#### After (ìˆ˜ì • í›„):
```javascript
const implicitPatterns = {
  'bkit:gap-detector': {
    patterns: [
      /is this (right|correct)/i, /does this match/i, /verify/i, /check/i,
      /ë§ì•„\??/, /ê´œì°®ì•„\??/, /ì„¤ê³„ëŒ€ë¡œ/, /ê²€ì¦/, /í™•ì¸/,
      // ... (ë™ì¼)
    ],
    contextRequired: ['design', 'implementation']
  },
  'bkit:code-analyzer': {
    patterns: [
      /any (issues|problems)/i, /something (wrong|off)/i, /analyze/i, /quality/i,
      // ... (ë™ì¼)
    ],
    contextRequired: ['code']
  },
  'bkit:pdca-iterator': {
    patterns: [
      /make.*better/i, /improve/i, /fix (this|it)/i, /iterate/i, /auto.?fix/i,
      // ... (ë™ì¼)
    ],
    contextRequired: ['check', 'act']
  },
  'bkit:report-generator': {
    patterns: [
      /what did we/i, /status/i, /progress/i, /summary/i, /report/i,
      // ... (ë™ì¼)
    ],
    contextRequired: ['any']
  },
  'bkit:starter-guide': {
    patterns: [
      /help.*understand/i, /don't understand/i, /confused/i, /beginner/i,
      // ... (ë™ì¼)
    ],
    contextRequired: ['any']
  }
};
```

**ë³€ê²½ ìš”ì•½**: Object keyë§Œ ë³€ê²½, patterns ë°°ì—´ì€ ë³€ê²½ ì—†ìŒ

---

### 4.2 SKILL.md íŒŒì¼ ìˆ˜ì • ìƒì„¸

#### 4.2.1 ë‹¨ì¼ agent í•„ë“œ ìˆ˜ì • (15ê°œ íŒŒì¼)

| íŒŒì¼ | Line | Before | After |
|------|------|--------|-------|
| `skills/code-review/SKILL.md` | 19 | `agent: code-analyzer` | `agent: bkit:code-analyzer` |
| `skills/starter/SKILL.md` | 22 | `agent: starter-guide` | `agent: bkit:starter-guide` |
| `skills/dynamic/SKILL.md` | 22 | `agent: bkend-expert` | `agent: bkit:bkend-expert` |
| `skills/zero-script-qa/SKILL.md` | 17 | `agent: qa-monitor` | `agent: bkit:qa-monitor` |
| `skills/phase-4-api/SKILL.md` | 19 | `agent: qa-monitor` | `agent: bkit:qa-monitor` |
| `skills/phase-6-ui-integration/SKILL.md` | 19 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/phase-7-seo-security/SKILL.md` | 18 | `agent: code-analyzer` | `agent: bkit:code-analyzer` |
| `skills/phase-9-deployment/SKILL.md` | 19 | `agent: infra-architect` | `agent: bkit:infra-architect` |
| `skills/development-pipeline/SKILL.md` | 19 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/desktop-app/SKILL.md` | 16 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/mobile-app/SKILL.md` | 16 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/phase-1-schema/SKILL.md` | 14 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/phase-2-convention/SKILL.md` | 14 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/phase-3-mockup/SKILL.md` | 14 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |
| `skills/phase-5-design-system/SKILL.md` | 19 | `agent: pipeline-guide` | `agent: bkit:pipeline-guide` |

#### 4.2.2 ë³µìˆ˜ agents í•„ë“œ ìˆ˜ì • (3ê°œ íŒŒì¼)

**skills/pdca/SKILL.md (line 21-25)**:
```yaml
# Before
agents:
  analyze: gap-detector
  iterate: pdca-iterator
  report: report-generator
  default: null

# After
agents:
  analyze: bkit:gap-detector
  iterate: bkit:pdca-iterator
  report: bkit:report-generator
  default: null
```

**skills/phase-8-review/SKILL.md (line 21-24)**:
```yaml
# Before
agents:
  default: code-analyzer
  validate: design-validator
  gap: gap-detector

# After
agents:
  default: bkit:code-analyzer
  validate: bkit:design-validator
  gap: bkit:gap-detector
```

**skills/enterprise/SKILL.md (line 23-26)**:
```yaml
# Before
agents:
  default: enterprise-expert
  infra: infra-architect
  architecture: enterprise-expert

# After
agents:
  default: bkit:enterprise-expert
  infra: bkit:infra-architect
  architecture: bkit:enterprise-expert
```

#### 4.2.3 ìˆ˜ì • ì œì™¸ íŒŒì¼

| íŒŒì¼ | ì´ìœ  |
|------|------|
| `skills/claude-code-learning/SKILL.md` | `claude-code-guide`ëŠ” built-in agent |

---

### 4.3 hooks/session-start.js ìˆ˜ì •

**íŒŒì¼**: `hooks/session-start.js`
**í•¨ìˆ˜**: `getTriggerKeywordTable` (line 437-460)
**ë³€ê²½ ìœ í˜•**: ë¬¸ìì—´ í…Œì´ë¸” ìˆ˜ì •

#### Before:
```javascript
function getTriggerKeywordTable() {
  return `
## ğŸ¯ v1.4.0 Auto-Trigger Keywords (8 Languages Supported)

### Agent Triggers
| Keywords | Agent | Action |
|----------|-------|--------|
| verify, ê²€ì¦, ç¢ºèª, éªŒè¯, verificar, vÃ©rifier, prÃ¼fen, verificare | gap-detector | Run Gap analysis |
| improve, ê°œì„ , æ”¹å–„, æ”¹è¿›, mejorar, amÃ©liorer, verbessern, migliorare | pdca-iterator | Auto-improvement iteration |
| analyze, ë¶„ì„, åˆ†æ, å“è³ª, analizar, analyser, analysieren, analizzare | code-analyzer | Code quality analysis |
| report, ë³´ê³ ì„œ, å ±å‘Š, æŠ¥å‘Š, informe, rapport, Bericht, rapporto | report-generator | Generate completion report |
| help, ë„ì›€, åŠ©ã‘ã¦, å¸®åŠ©, ayuda, aide, Hilfe, aiuto | starter-guide | Beginner guide |
...
`;
}
```

#### After:
```javascript
function getTriggerKeywordTable() {
  return `
## ğŸ¯ v1.4.0 Auto-Trigger Keywords (8 Languages Supported)

### Agent Triggers
| Keywords | Agent | Action |
|----------|-------|--------|
| verify, ê²€ì¦, ç¢ºèª, éªŒè¯, verificar, vÃ©rifier, prÃ¼fen, verificare | bkit:gap-detector | Run Gap analysis |
| improve, ê°œì„ , æ”¹å–„, æ”¹è¿›, mejorar, amÃ©liorer, verbessern, migliorare | bkit:pdca-iterator | Auto-improvement iteration |
| analyze, ë¶„ì„, åˆ†æ, å“è³ª, analizar, analyser, analysieren, analizzare | bkit:code-analyzer | Code quality analysis |
| report, ë³´ê³ ì„œ, å ±å‘Š, æŠ¥å‘Š, informe, rapport, Bericht, rapporto | bkit:report-generator | Generate completion report |
| help, ë„ì›€, åŠ©ã‘ã¦, å¸®åŠ©, ayuda, aide, Hilfe, aiuto | bkit:starter-guide | Beginner guide |
...
`;
}
```

---

### 4.4 skills/bkit-rules/SKILL.md ìˆ˜ì •

**íŒŒì¼**: `skills/bkit-rules/SKILL.md`
**ìœ„ì¹˜**: Section 3. Agent Auto-Trigger Rules (line 116-123)
**ë³€ê²½ ìœ í˜•**: ë¬¸ì„œ í…Œì´ë¸” ìˆ˜ì •

#### Before:
```markdown
### Task-Based Selection

| User Intent | Auto-Invoke Agent |
|-------------|-------------------|
| "code review", "security scan" | `code-analyzer` |
| "design review", "spec check" | `design-validator` |
| "gap analysis" | `gap-detector` |
| "report", "summary" | `report-generator` |
| "QA", "log analysis" | `qa-monitor` |
| "pipeline", "which phase" | `pipeline-guide` |
```

#### After:
```markdown
### Task-Based Selection

| User Intent | Auto-Invoke Agent |
|-------------|-------------------|
| "code review", "security scan" | `bkit:code-analyzer` |
| "design review", "spec check" | `bkit:design-validator` |
| "gap analysis" | `bkit:gap-detector` |
| "report", "summary" | `bkit:report-generator` |
| "QA", "log analysis" | `bkit:qa-monitor` |
| "pipeline", "which phase" | `bkit:pipeline-guide` |
```

---

### 4.5 .claude-plugin/plugin.json ìˆ˜ì •

**íŒŒì¼**: `.claude-plugin/plugin.json`
**ë³€ê²½ ìœ í˜•**: ë²„ì „ ì—…ë°ì´íŠ¸

#### Before:
```json
{
  "name": "bkit",
  "version": "1.4.5",
  ...
}
```

#### After:
```json
{
  "name": "bkit",
  "version": "1.4.6",
  ...
}
```

---

## 5. Implementation Checklist

### 5.1 Phase 1: Core Logic (Critical)

- [ ] **IMP-01**: `lib/common.js` - `matchImplicitAgentTrigger` í•¨ìˆ˜ì˜ 5ê°œ agent keyì— `bkit:` prefix ì¶”ê°€
  - `gap-detector` â†’ `bkit:gap-detector`
  - `code-analyzer` â†’ `bkit:code-analyzer`
  - `pdca-iterator` â†’ `bkit:pdca-iterator`
  - `report-generator` â†’ `bkit:report-generator`
  - `starter-guide` â†’ `bkit:starter-guide`

### 5.2 Phase 2: PDCA Skill (Critical)

- [ ] **IMP-02**: `skills/pdca/SKILL.md` - agents ë§¤í•‘ 3ê°œ ìˆ˜ì •

### 5.3 Phase 3: Single Agent Skills (High)

- [ ] **IMP-03**: `skills/code-review/SKILL.md` - line 19
- [ ] **IMP-04**: `skills/starter/SKILL.md` - line 22
- [ ] **IMP-05**: `skills/dynamic/SKILL.md` - line 22
- [ ] **IMP-06**: `skills/zero-script-qa/SKILL.md` - line 17
- [ ] **IMP-07**: `skills/phase-4-api/SKILL.md` - line 19
- [ ] **IMP-08**: `skills/phase-6-ui-integration/SKILL.md` - line 19
- [ ] **IMP-09**: `skills/phase-7-seo-security/SKILL.md` - line 18
- [ ] **IMP-10**: `skills/phase-9-deployment/SKILL.md` - line 19
- [ ] **IMP-11**: `skills/development-pipeline/SKILL.md` - line 19
- [ ] **IMP-12**: `skills/desktop-app/SKILL.md` - line 16
- [ ] **IMP-13**: `skills/mobile-app/SKILL.md` - line 16
- [ ] **IMP-14**: `skills/phase-1-schema/SKILL.md` - line 14
- [ ] **IMP-15**: `skills/phase-2-convention/SKILL.md` - line 14
- [ ] **IMP-16**: `skills/phase-3-mockup/SKILL.md` - line 14
- [ ] **IMP-17**: `skills/phase-5-design-system/SKILL.md` - line 19

### 5.4 Phase 4: Multiple Agent Skills (High)

- [ ] **IMP-18**: `skills/phase-8-review/SKILL.md` - agents ë§¤í•‘ 3ê°œ ìˆ˜ì •
- [ ] **IMP-19**: `skills/enterprise/SKILL.md` - agents ë§¤í•‘ 3ê°œ ìˆ˜ì • (2ê°œ ê³ ìœ ê°’)

### 5.5 Phase 5: Documentation (Medium)

- [ ] **IMP-20**: `skills/bkit-rules/SKILL.md` - Task-Based Selection í…Œì´ë¸” 6ê°œ í•­ëª© ìˆ˜ì •
- [ ] **IMP-21**: `hooks/session-start.js` - getTriggerKeywordTable í•¨ìˆ˜ 5ê°œ í•­ëª© ìˆ˜ì •

### 5.6 Phase 6: Version Update (High)

- [ ] **IMP-22**: `.claude-plugin/plugin.json` - version 1.4.5 â†’ 1.4.6

---

## 6. Test Plan

### 6.1 Unit Test Cases

| Test ID | Target | Input | Expected Output |
|---------|--------|-------|-----------------|
| UT-01 | matchImplicitAgentTrigger | "ì„¤ê³„ëŒ€ë¡œ êµ¬í˜„ëì–´?" | `{ agent: "bkit:gap-detector", ... }` |
| UT-02 | matchImplicitAgentTrigger | "ì´ìƒí•œ ë¶€ë¶„ ìˆì–´?" | `{ agent: "bkit:code-analyzer", ... }` |
| UT-03 | matchImplicitAgentTrigger | "ê³ ì³ì¤˜" | `{ agent: "bkit:pdca-iterator", ... }` |
| UT-04 | matchImplicitAgentTrigger | "ë³´ê³ ì„œ ì‘ì„±í•´" | `{ agent: "bkit:report-generator", ... }` |
| UT-05 | matchImplicitAgentTrigger | "ì´í•´ê°€ ì•ˆë¼" | `{ agent: "bkit:starter-guide", ... }` |

### 6.2 Integration Test Cases

| Test ID | Scenario | Steps | Expected Result |
|---------|----------|-------|-----------------|
| IT-01 | PDCA analyze action | 1. Run `/pdca analyze test`<br>2. Check Task tool call | `subagent_type="bkit:gap-detector"` |
| IT-02 | Code Review Skill | 1. Run `/code-review src/`<br>2. Check Task tool call | `subagent_type="bkit:code-analyzer"` |
| IT-03 | Implicit Trigger | 1. Input "ì„¤ê³„ëŒ€ë¡œì•¼?"<br>2. Check agent suggestion | "Suggested agent: bkit:gap-detector" |

### 6.3 E2E Test Scenarios

```
Scenario 1: Gap Detector ì „ì²´ í”Œë¡œìš°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Claude Code ì„¸ì…˜ ì‹œì‘
2. ì‚¬ìš©ì ì…ë ¥: "ì„¤ê³„ëŒ€ë¡œ êµ¬í˜„ëì–´?"
3. í™•ì¸: Hookì´ "Suggested agent: bkit:gap-detector" ì¶œë ¥
4. í™•ì¸: AIê°€ Task(subagent_type="bkit:gap-detector") í˜¸ì¶œ
5. í™•ì¸: Agent ì‹¤í–‰ ì„±ê³µ (ì˜¤ë¥˜ ì—†ìŒ)

Scenario 2: PDCA Skillì„ í†µí•œ Agent í˜¸ì¶œ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ì‚¬ìš©ì ì…ë ¥: "/pdca analyze my-feature"
2. í™•ì¸: PDCA Skillì´ agents.analyze ê°’ ì‚¬ìš©
3. í™•ì¸: Task(subagent_type="bkit:gap-detector") í˜¸ì¶œ
4. í™•ì¸: Agent ì‹¤í–‰ ì„±ê³µ

Scenario 3: Session Start Hook ê²€ì¦
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ìƒˆ Claude Code ì„¸ì…˜ ì‹œì‘
2. í™•ì¸: Trigger í…Œì´ë¸”ì— "bkit:gap-detector" ë“± í‘œì‹œ
3. í™•ì¸: 5ê°œ ëª¨ë“  agentì— "bkit:" prefix í¬í•¨
```

---

## 7. Rollback Plan

### 7.1 Rollback íŠ¸ë¦¬ê±° ì¡°ê±´

- Agent í˜¸ì¶œ ì‹¤íŒ¨ìœ¨ > 5%
- Hook ì‹¤í–‰ ì˜¤ë¥˜ ë°œìƒ
- Skill ë¡œë“œ ì‹¤íŒ¨

### 7.2 Rollback ì ˆì°¨

```bash
# Step 1: ì»¤ë°‹ ë˜ëŒë¦¬ê¸°
git revert HEAD

# Step 2: plugin.json ë²„ì „ ë³µì› í™•ì¸
cat .claude-plugin/plugin.json | grep version
# Expected: "version": "1.4.5"

# Step 3: ê²€ì¦
# Claude Code ì„¸ì…˜ì—ì„œ agent í˜¸ì¶œ í…ŒìŠ¤íŠ¸
```

---

## 8. Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 0.1 | 2026-01-28 | Initial design based on plan document | Claude Code |
